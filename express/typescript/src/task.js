"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.doTask = exports.createTasksDecorator = void 0;
require("reflect-metadata");
const path_1 = __importDefault(require("path"));
const utils_1 = require("./utils");
const class_1 = require("./utils/class");
const moment_1 = __importDefault(require("moment"));
const fs_1 = __importDefault(require("fs"));
const projectRoot = path_1.default.join(__dirname, '../../../../../');
const tasksLogPath = path_1.default.join(projectRoot, './logs/tasks');
const now = new Date();
const getDateNum = () => {
    return new Date(now.getFullYear(), now.getMonth() + 1, 0).getDate();
};
function parseLoop(str) {
    let time = 0;
    const msList = str.match(/[0-9]+ms/g);
    if (msList) {
        msList
            .map(item => Number.parseFloat(item.replace('ms', '')))
            .forEach(t => {
            time += t;
        });
    }
    const sList = str.match(/[0-9]+s/g);
    if (sList) {
        sList
            .map(item => Number.parseFloat(item.replace('s', '')))
            .forEach(t => {
            time += t * 1000;
        });
    }
    const minList = str.match(/[0-9]+min/g);
    if (minList) {
        minList
            .map(item => Number.parseFloat(item.replace('min', '')))
            .forEach(t => {
            time += t * 1000 * 60;
        });
    }
    const hList = str.match(/[0-9]+h/g);
    if (hList) {
        hList
            .map(item => Number.parseFloat(item.replace('h', '')))
            .forEach(t => {
            time += t * 1000 * 60 * 60;
        });
    }
    const dList = str.match(/[0-9]+D/g);
    if (dList) {
        dList
            .map(item => Number.parseFloat(item.replace('D', '')))
            .forEach(t => {
            time += t * 1000 * 60 * 60 * 24;
        });
    }
    const wList = str.match(/[0-9]+W/g);
    if (wList) {
        wList
            .map(item => Number.parseFloat(item.replace('W', '')))
            .forEach(t => {
            time += t * 1000 * 60 * 60 * 24 * 7;
        });
    }
    const dateNum = getDateNum();
    const monList = str.match(/[0-9]+M/g);
    if (monList) {
        monList
            .map(item => Number.parseFloat(item.replace('M', '')))
            .forEach(t => {
            time += t * 1000 * 60 * 60 * 24 * dateNum;
        });
    }
    const yList = str.match(/[0-9]+Y/g);
    if (yList) {
        yList
            .map(item => Number.parseFloat(item.replace('Y', '')))
            .forEach(t => {
            time += t * 1000 * 60 * 60 * 24 * 365;
        });
    }
    return time;
}
function toSetTime(str) {
    let arr = str.split(':').map(t => Number.parseInt(t));
    while (arr.length < 3) {
        arr.push(0);
    }
    return arr;
}
function countWeek(start, end) {
    if (end >= start)
        return end - start;
    return start + 7 - end;
}
function beforeToday(time) {
    let nowTimeArr = toSetTime((0, moment_1.default)(now).format('HH:mm:ss'));
    return !time.some((item, index) => item > nowTimeArr[index]);
}
function parseTime(time, week, month) {
    if ((0, utils_1.notEmpty)(week) && (0, utils_1.notEmpty)(month))
        throw new Error('@Week and @Month cannot be set at the same time.');
    let loop = 0;
    let delay;
    const oneDay = 1000 * 60 * 60 * 24;
    let start = new Date();
    if (!(0, utils_1.notEmpty)(week) && !(0, utils_1.notEmpty)(month) && (0, utils_1.notEmpty)(time)) {
        loop = oneDay;
        if (beforeToday(toSetTime(time)))
            start.setDate(start.getDate() + 1);
        time = toSetTime(time);
        start.setHours(time[0], time[1], time[2]);
        delay = start.getTime() - now.getTime();
        return { loop, delay };
    }
    time = toSetTime(time || '00:00:00');
    start.setHours(time[0], time[1], time[2]);
    if ((0, utils_1.notEmpty)(month)) {
        loop = oneDay * getDateNum();
        month = Number.parseInt(month);
        if (now.getDate() > month || beforeToday(time))
            start.setMonth(start.getMonth() + 1);
        start.setDate(month);
    }
    if ((0, utils_1.notEmpty)(week)) {
        loop = oneDay * 7;
        week = Number.parseInt(week);
        let nextWeek = countWeek(now.getDay(), week);
        if (beforeToday(time))
            nextWeek += 7;
        start.setDate(start.getDate() + nextWeek);
    }
    delay = start.getTime() - now.getTime();
    return { loop, delay };
}
const createTasksDecorator = (mode) => {
    return (params) => {
        return (_target, _propertyKey, descriptor) => {
            Reflect.defineMetadata(mode, params, descriptor.value);
        };
    };
};
exports.createTasksDecorator = createTasksDecorator;
function taskLogger(mode, className, ret) {
    if (!fs_1.default.existsSync(tasksLogPath))
        fs_1.default.mkdirSync(tasksLogPath);
    const fileName = (0, moment_1.default)(new Date()).format('YYYY-MM-DD') + '.log';
    const filePath = path_1.default.join(tasksLogPath, fileName);
    const time = (0, moment_1.default)(new Date()).format('YYYY-MM-DD HH:mm:ss');
    let logString = `[${time}] ${mode} Task from class ${className} done!`;
    if (ret)
        logString += `Method return value: ${ret}.`;
    logString += '\n';
    try {
        fs_1.default.appendFileSync(filePath, logString);
    }
    catch (e) {
        console.error(e);
    }
}
const doTask = (Task) => {
    const flag = Reflect.getMetadata('isTask', Task);
    if (!flag)
        return;
    const methods = (0, class_1.getMethodsFromClass)(new Task());
    for (const methodName in methods) {
        const fn = methods[methodName];
        const loop = Reflect.getMetadata('loop', fn);
        const time = Reflect.getMetadata('time', fn);
        const week = Reflect.getMetadata('week', fn);
        const month = Reflect.getMetadata('month', fn);
        if ((0, utils_1.notEmpty)(loop)) {
            const loopTime = parseLoop(loop);
            setInterval(() => {
                taskLogger('Loop', Task.name, fn());
            }, loopTime);
        }
        else if ((0, utils_1.notEmpty)(time, week, month)) {
            const { delay, loop } = parseTime(time, week, month);
            setTimeout(() => {
                taskLogger('Schedule', Task.name, fn());
                setInterval(() => {
                    taskLogger('Schedule', Task.name, fn());
                }, loop);
            }, delay);
        }
    }
};
exports.doTask = doTask;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFzay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3Jlc291cmNlcy9zcmMvdGFzay50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSw0QkFBMEI7QUFDMUIsZ0RBQXdCO0FBQ3hCLG1DQUFtQztBQUNuQyx5Q0FBb0Q7QUFFcEQsb0RBQTRCO0FBQzVCLDRDQUFvQjtBQUVwQixNQUFNLFdBQVcsR0FBRyxjQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0FBQzVELE1BQU0sWUFBWSxHQUFHLGNBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBRTVELE1BQU0sR0FBRyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUM7QUFHdkIsTUFBTSxVQUFVLEdBQUcsR0FBRyxFQUFFO0lBQ3ZCLE9BQU8sSUFBSSxJQUFJLENBQUMsR0FBRyxDQUFDLFdBQVcsRUFBRSxFQUFFLEdBQUcsQ0FBQyxRQUFRLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7QUFDckUsQ0FBQyxDQUFDO0FBR0YsU0FBUyxTQUFTLENBQUMsR0FBVztJQUM3QixJQUFJLElBQUksR0FBRyxDQUFDLENBQUM7SUFDYixNQUFNLE1BQU0sR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3RDLElBQUksTUFBTSxFQUFFO1FBQ1gsTUFBTTthQUNKLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUN0RCxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUU7WUFDWixJQUFJLElBQUksQ0FBQyxDQUFDO1FBQ1gsQ0FBQyxDQUFDLENBQUM7S0FDSjtJQUNELE1BQU0sS0FBSyxHQUFHLEdBQUcsQ0FBQyxLQUFLLENBQUMs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